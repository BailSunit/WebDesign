<!DOCTYPE html>
<html lang="en">

<head>
  <title>Feedback</title>
  <style>
    label {
      float: left;
      width: 150px;
    }

    #container {
      width: 700px;
      margin: auto;
      background-color: beige;
    }

    main {
      padding: 50px;
    }

    li {
      list-style-type: none;
      margin: 0px;
      padding: 0px;
      vertical-align: middle;
    }
  </style>
</head>

<body>
  <div id="container">
    <main>
      <h2>Feedback</h2>
      <h3>Love something? Hate something? Let us know!</h3>
      Note : Fields marked with an asterisk(*) are mandatory
      <br /><br />
      <form id="myForm" method="post" novalidate action="Table.html" onsubmit="return validate_form(this)">
        <label>Title*:</label>
        <input type="radio" name="title" id="Miss" value="Miss" />Miss
        <input type="radio" name="title" id="Mr" value="Mr" />Mr.
        <input type="radio" name="title" id="Mrs" value="Mrs" />Mrs.
        <br /><br />
        <label for="firstName">First Name*:</label>
        <!-- The for attribute specifies which form element a label is bound to. -->
        <input type="text" name="firstName" id="firstName" placeholder="First Name" />
        <br /><br />

        <label for="lastName">Last Name*:</label>
        <input type="text" name="lastName" id="lastName" placeholder="Last Name" />
        <br /><br />

        <label for="emailId">Email Id*:</label>
        <input type="text" name="emailId" id="emailId" placeholder="yourname@domain.com" onkeyup="emailReg()" />
        <br /><br />

        <label for="phoneNumber">Phone Number*:</label>
        <input type="text" name="phoneNumber" id="phoneNumber" placeholder="xxx-xxx-xxxx" onkeyup="phoneReg()" />
        <br /><br />

        <label for="streetAddress1">Street Address 1*:</label>
        <input type="text" name="streetAddress1" id="streetAddress1" placeholder="address" />
        <br /><br />

        <label for="streetAddress2">Street Address 2:</label>
        <input type="text" name="streetAddress2" id="streetAddress2" placeholder="address" />
        <br /><br />

        <label for="city">City*:</label>
        <input type="text" name="city" id="city" placeholder="city" />
        <br /><br />

        <label for="state">State*:</label>
        <input type="text" name="state" id="state" placeholder="state" />
        <br /><br />

        <label for="zipcode">ZipCode*:</label>
        <input type="text" name="zipcode" id="zipcode" placeholder="xxxxx" onkeyup="zipReg()" />
        <br /><br />

        <label for="select">How did you hear*:</label>
        <select id="select" name="source" onchange="popCheckbox(this)">
          <option value="Default" selected="selected">
            -Please select an option-
          </option>
          <option value="Social Media">Social Media</option>
          <option value="Website">Website</option>
          <option value="Apps">Apps</option>
          <option value="People">People</option>
          <option value="Other">Other</option>
        </select>
        <br /><br />
        <label for="comments">Comments*:</label>
        <textarea name="text" id="comments" placeholder="Your comments" rows="5" cols="25"></textarea>
        <br /><br />
        <br><br>
        <input type="Submit" id="btn" />
        <input type="Reset" />
        <br /><br />
      </form>
    </main>
  </div>

  <script>
    function disableSubmit() {
      let submit = document.getElementById("btn");
      submit.disabled = true;
    }

    function enableSubmit() {
      let submit = document.getElementById("btn");
      submit.disabled = false;
    }

    function phoneReg() {
      var phoneReg = /[0-9]{3}\-[0-9]{3}\-([0-9]{4})$/;
      var phone = document.getElementById("phoneNumber").value;
      if (phoneReg.test(phone) == true) {
        document.getElementById("phoneNumber").style.backgroundColor =
          "white";
        enableSubmit();
      } else {
        document.getElementById("phoneNumber").style.backgroundColor =
          "#fa8072";
        disableSubmit();
      }
    }
    function zipReg() {
      var zipReg = /^[0-9]{5}$/; //type more to remain red
      var zipcode = document.getElementById("zipcode").value;
      if (zipReg.test(zipcode) == true) {
        document.getElementById("zipcode").style.backgroundColor = "white";
        enableSubmit();
      } else {
        document.getElementById("zipcode").style.backgroundColor = "#fa8072";
        disableSubmit();
      }
    }
    function emailReg() {
      var emailReg =
        /^([0-9A-Za-z])+[0-9A-Za-z_\.\-]+\@(northeastern)\.(edu)$/;
      var email = document.getElementById("emailId").value;
      if (emailReg.test(email) == true) {
        document.getElementById("emailId").style.backgroundColor = "white";
        enableSubmit();
      } else {
        document.getElementById("emailId").style.backgroundColor = "#fa8072";
        disableSubmit();
      }
    }
    var ulCount = 0;
    function popCheckbox(selectList) {
      var select = document.getElementById("select");
      var p = select.parentNode;
      var comments = document.getElementById("comments");
      var selectValue = select.value;
      switch (selectValue) {
        case "Social Media":
          if (ulCount > 0) {
            p.removeChild(document.getElementsByTagName("ul")[0]);
            ulCount--;
          }
          var text = document.createTextNode("Facebook");
          var ul = document.createElement("ul");
          var li = document.createElement("li");
          li.innerHTML =
            '<input id="checkbox" type="checkbox" name="hear" value="Facebook" onclick="checkboxOnclick(this)"/>';
          var label = document.createElement("li");
          label.innerHTML =
            '<label id="label" for="textarea" style="visibility:hidden;">Please make an example*:</label>';
          var textarea = document.createElement("li");
          textarea.innerHTML =
            '<textarea name="example" id="textarea" style="visibility:hidden;" placeholder="Your example" rows="2" cols="25"></textarea>';
          li.appendChild(text);
          li.appendChild(label);
          li.appendChild(textarea);
          ul.appendChild(li);
          insertAfter(ul, select);
          ulCount++;
          break;
        case "Website":
          if (ulCount > 0) {
            p.removeChild(document.getElementsByTagName("ul")[0]);
            ulCount--;
          }
          var text = document.createTextNode("Google");
          var ul = document.createElement("ul");
          var li = document.createElement("li");
          li.innerHTML =
            '<input id="checkbox" type="checkbox" name="hear" value="Google" onclick="checkboxOnclick(this)"/>';
          var label = document.createElement("li");
          label.innerHTML =
            '<label id="label" for="textarea" style="visibility:hidden;">Please make an example*:</label>';
          var textarea = document.createElement("li");
          textarea.innerHTML =
            '<textarea name="example" id="textarea" style="visibility:hidden;" placeholder="Your example" rows="2" cols="25"></textarea>';
          li.appendChild(text);
          li.appendChild(label);
          li.appendChild(textarea);
          ul.appendChild(li);
          insertAfter(ul, select);
          ulCount++;
          break;
        case "Apps":
          if (ulCount > 0) {
            p.removeChild(document.getElementsByTagName("ul")[0]);
            ulCount--;
          }
          var text = document.createTextNode("Yelp");
          var ul = document.createElement("ul");
          var li = document.createElement("li");
          li.innerHTML =
            '<input id="checkbox" type="checkbox" name="hear" value="Yelp" onclick="checkboxOnclick(this)"/>';
          var label = document.createElement("li");
          label.innerHTML =
            '<label id="label" for="textarea" style="visibility:hidden;">Please make an example*:</label>';
          var textarea = document.createElement("li");
          textarea.innerHTML =
            '<textarea name="example" id="textarea" style="visibility:hidden;" placeholder="Your example" rows="2" cols="25"></textarea>';
          li.appendChild(text);
          li.appendChild(label);
          li.appendChild(textarea);
          ul.appendChild(li);
          insertAfter(ul, select);
          ulCount++;
          break;
        case "People":
          if (ulCount > 0) {
            p.removeChild(document.getElementsByTagName("ul")[0]);
            ulCount--;
          }
          var text = document.createTextNode("Family");
          var ul = document.createElement("ul");
          var li = document.createElement("li");
          li.innerHTML =
            '<input id="checkbox" type="checkbox" name="hear" value="Family" onclick="checkboxOnclick(this)"/>';
          var label = document.createElement("li");
          label.innerHTML =
            '<label id="label" for="textarea" style="visibility:hidden;">Please make an example*:</label>';
          var textarea = document.createElement("li");
          textarea.innerHTML =
            '<textarea name="example" id="textarea" style="visibility:hidden;" placeholder="Your example" rows="2" cols="25"></textarea>';
          li.appendChild(text);
          li.appendChild(label);
          li.appendChild(textarea);
          ul.appendChild(li);
          insertAfter(ul, select);
          ulCount++;
          break;
        case "Other":
          if (ulCount > 0) {
            p.removeChild(document.getElementsByTagName("ul")[0]);
            ulCount--;
          }
          var text = document.createTextNode("Flyer");
          var ul = document.createElement("ul");
          var li = document.createElement("li");
          li.innerHTML =
            '<input id="checkbox" type="checkbox" name="hear" value="Flyer" onclick="checkboxOnclick(this)"/>';
          var label = document.createElement("li");
          label.innerHTML =
            '<label id="label" for="textarea" style="visibility:hidden;">Please make an example*:</label>';
          var textarea = document.createElement("li");
          textarea.innerHTML =
            '<textarea id="textarea" name="example" style="visibility:hidden;" placeholder="Your example" rows="2" cols="25"></textarea>';
          li.appendChild(text);
          li.appendChild(label);
          li.appendChild(textarea);
          ul.appendChild(li);
          insertAfter(ul, select);
          ulCount++;
          break;
      }
    }
    function checkboxOnclick(checkbox) {
      if (checkbox.checked == true) {
        document.getElementById("textarea").style.visibility = "visible";
        document.getElementById("label").style.visibility = "visible";
      } else {
        document.getElementById("textarea").style.visibility = "hidden";
        document.getElementById("label").style.visibility = "hidden";
      }
    }
    function insertAfter(newEl, targetEl) {
      var parentEl = targetEl.parentNode;
      if (parentEl.lastChild == targetEl) {
        parentEl.appendChild(newEl);
      } else {
        parentEl.insertBefore(newEl, targetEl.nextSibling);
      }
    }
    function validate_required(field, alerttxt) {
      with (field) {
        if (value == null || value == "") {
          alert(alerttxt);
          return false;
        }
        else {
          return true;
        }
      }
    }

    function validate_form(thisform) {
      var fill_title = document.getElementsByName("title"); //validate radio button
      var flag = 0;
      for (var i = 0; i < fill_title.length; i++) {
        if (fill_title.item(i).checked == true) {
          flag = 1;
          break;
        }
      }
      if (!flag) {
        alert("Please choose a title!");
        return false;
      }
      with (thisform) {
        if (
          validate_required(firstName, "First Name must be filled out!") ==
          false
        ) {
          firstName.focus();
          return false;
        }
        if (
          validate_required(lastName, "Last Name must be filled out!") ==
          false
        ) {
          lastName.focus();
          return false;
        }
        if (
          validate_required(emailId, "Email must be filled out!") == false
        ) {
          emailId.focus();
          return false;
        }
        if (
          validate_required(
            phoneNumber,
            "Phone Number must be filled out!"
          ) == false
        ) {
          phoneNumber.focus();
          return false;
        }
        if (
          validate_required(streetAddress1, "Address must be filled out!") == false
        ) {
          streetAddress1.focus();
          return false;
        }
        if (
          validate_required(city, "City must be filled out!") == false
        ) {
          city.focus();
          return false;
        }
        if (
          validate_required(state, "State must be filled out!") == false
        ) {
          state.focus();
          return false;
        }
        if (
          validate_required(zipcode, "Zipcode must be filled out!") == false
        ) {
          zipcode.focus();
          return false;
        }
        if (source.value === 'Default') {
          alert("Source must be filled out!");
          source.focus();
          return false;
        }
        if (
          validate_required(
            example,
            "Please select a checkbox and filled out the example!"
          ) == false
        ) {
          example.focus();
          return false; //validate both the checkbox and the textarea
        }
        if (
          validate_required(text, "Comments must be filled out!") == false
        ) {
          text.focus();
          return false;
        }
      }
    }
    var btn = document.getElementById("btn");
    var radio = document.getElementsByName("title");
    var first_name = document.getElementById("firstName");
    var last_name = document.getElementById("lastName");
    var email_id = document.getElementById("emailId");
    var phone_number = document.getElementById("phoneNumber");
    var zipcode = document.getElementById("zipcode");
    var mySelect = document.getElementById("select");
    var checkbox = document.getElementsByName("hear");
    var example = document.getElementsByName("example");
    var comment = document.getElementById("comments");
    var streetAddress1 = document.getElementById("streetAddress1");
    var streetAddress2 = document.getElementById("streetAddress2");
    var city = document.getElementById("city");
    var state = document.getElementById("state");

    btn.addEventListener("click", function () {
      for (var i = 0; i < radio.length; i++) {
        if (radio[i].checked) {
          localStorage.title = radio[i].value;
        }
      }
      localStorage.firstName = first_name.value;
      localStorage.lastName = last_name.value;
      localStorage.emailId = email_id.value;
      localStorage.phoneNumber = phone_number.value;
      localStorage.zipcode = zipcode.value;
      var myindex = mySelect.selectedIndex;
      localStorage.hear = mySelect.options[myindex].value;
      localStorage.comments = comment.value;
      localStorage.streetAddress1 = streetAddress1.value;
      localStorage.streetAddress2 = streetAddress2.value;
      localStorage.city = city.value;
      localStorage.state = state.value;
      for (var i = 0; i < checkbox.length; i++) {
        if (checkbox[i].checked) {
          localStorage.way = checkbox[i].value;
          localStorage.example = example[i].value;
        }
      }
    });
  </script>
</body>

</html>